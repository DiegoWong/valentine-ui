<html>
<body>
  <label for="user">username</label>
  <input type="text" id="user" />
  <label for="password">password</label>
  <input type="password" id="password" />
  <button onClick="login()">login</button>
</body>
<script>
  function login() {

    const username = document.querySelector('#user').value;
    const password = document.querySelector('#password').value;
    const encoded = btoa('acme:acmesecret');

    const data = {
      grant_type:"password",
      username,
      password,
      client_id: "acme"
    };

    const formData = Object.keys(data).map((k) => `${encodeURIComponent(k)}=${encodeURIComponent(data[k])}`).join('&')

    fetch('http://localhost:8081/uaa/oauth/token', {
      method: 'POST',
      credentials: 'include',
      headers: {
        'Authorization': 'Basic ' + encoded,
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: formData
    })
      .then(blob => blob.json())
      .then(json => {
        window.localStorage.setItem('access_token', json.access_token)
        window.location.href='index.html'
      })
      .catch(function (error) {
        console.log('Request failed', error);
      });

  }
</script>
</html>